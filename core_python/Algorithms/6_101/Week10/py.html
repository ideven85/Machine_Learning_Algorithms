<!DOCTYPE html>

<html>
<head>
    <!-- This page was generated by CAT-SOOP 19.0.6+hg.2.cebb45dc.  miau. -->
    <meta charset="utf-8"/>
    <title>LISP Interpreter, Part 1 | 6.101 Spring 2024</title>
    <link href="https://py.mit.edu/_static/spring24/logo.gif" rel="icon" type="image/gif"/>
    <!-- include catsoop base css -->
    <link href="https://py.mit.edu/_static/_base/themes/base.css" rel="stylesheet" type="text/css"/>
    <!-- set up JS namespace for catsoop -->
    <script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    var catsoop = {
        plugins: {}
    };

    function toggleResponsiveHeader() {
        document.getElementsByTagName('header')[0].classList.toggle('responsive');
    }

    function toggleAttribute(elt, attr) {
        elt.setAttribute(attr, elt.getAttribute(attr) === "true" ? "false" : "true");
    }

    catsoop.topMenuFocus = function(event) {
        var elt = event.target;
        var target = event.relatedTarget;
        if (elt.classList.contains('menu-submenu')) {
            var topmenu = elt.parentNode.parentNode;
            if (target && !target.classList.contains("menu-submenu") && target !== topmenu.children[1]) {
                clearMenu(topmenu);
            }
        } else if (!target.classList.contains('cs_top_menu_item')) {
            clearMenu(elt.parentNode);
        }
    }

    window.addEventListener('DOMContentLoaded', function() {
        var menu_boxes = document.getElementsByClassName('dropdown-checkbox');
        for (var i = 0; i < menu_boxes.length; i++) {
            menu_boxes[i].checked = false;
        }
    });

    function clearMenu(menu) {
        menu.children[1].checked = false;
    }
    // @license-end
    </script>
    <!-- dark mode -->
    <script src="https://py.mit.edu/_static/_base/js/darkreader/darkreader.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.dark_mode_settings = null;
    if (catsoop.dark_mode_settings === null) {
        catsoop.dark_mode_settings = JSON.parse(localStorage.getItem('catsoop_dark_mode_settings'));
        if (catsoop.dark_mode_settings === null) {
            catsoop.dark_mode_settings = {
                'mode': 'disabled',
                'brightness': 100,
                'contrast': 90,
                'sepia': 10,
                'grayscale': 0
            };
        }
    }
    localStorage.setItem('catsoop_dark_mode_settings', JSON.stringify(catsoop.dark_mode_settings));
    catsoop.dark_mode = catsoop.dark_mode_settings.mode;
    delete catsoop.dark_mode_settings.mode;
    if (catsoop.dark_mode === 'enabled' || catsoop.dark_mode === 'auto') {
        DarkReader[catsoop.dark_mode == 'enabled' ? 'enable' : 'auto'](catsoop.dark_mode_settings);
    }

    document.addEventListener("DOMContentLoaded", function(event) {
        if (DarkReader.isEnabled()) {
            var invertfilter = 'invert(100%) hue-rotate(180deg)' +
            ' brightness(' + catsoop.dark_mode_settings.brightness + '%)' +
            ' contrast(' + catsoop.dark_mode_settings.contrast + '%)' +
            ' grayscale(' + catsoop.dark_mode_settings.grayscale + '%)' +
            ' sepia(' + catsoop.dark_mode_settings.sepia + '%)'
            var inverter = document.createElement('style');
            inverter.innerText = 'img.catsoop-darkmode-invert, video.catsoop-darkmode-invert {filter: ' + invertfilter + ';}\n\n'
            document.head.appendChild(inverter);
        }
    });
    // @license-end
    </script>
    <!-- load in mathjax and CAT-SOOP-specific math rendering  -->
    <script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    MathJax = {
        startup: {
            typeset: false,
        }
    }

    catsoop.render_math = function(elt) {
        if (elt.classList.contains('cs_displaymath')) {
            var b = "\\[";
            var e = "\\]";
        } else {
            var b = "\\(";
            var e = "\\)";
        }
        elt.innerText = b + elt.innerText + e;
        MathJax.typeset([elt]);
        elt.classList.remove('cs_math_to_render');
    }


    catsoop.render_all_math = function(elt) {
        if (elt === null) {
            return;
        }
        var mathelts = elt.getElementsByClassName('cs_math_to_render');
        while (mathelts.length > 0) {
            catsoop.render_math(mathelts[0]);
        }
    }
    document.addEventListener("DOMContentLoaded", function(event) {
        catsoop.render_all_math(document);
    });
    // @license-end
    </script>
    <script id="MathJax-script" src="https://py.mit.edu/_static/_base/js/mathjax/tex-chtml-full-speech.js"></script>
    <!-- load in diagram stuff -->
    <script src="https://py.mit.edu/_static/_base/js/cs_diagrams.js" type="text/javascript"></script>
    <script type="text/javascript">
    catsoop.diagram_sources = {};
    </script>
    <!-- Syntax Highlighting -->
    <script src="https://py.mit.edu/_static/_base/js/highlight/highlight.min.js" type="text/javascript"></script>
    <script src="https://py.mit.edu/_static/_base/js/highlightjs-line-numbers.js" type="text/javascript"></script>
    <script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    catsoop.syntax_highlighting = function(elt) {
        if (elt === null) {
            return;
        }
        elt.querySelectorAll('pre > code:not(.highlighted)').forEach((block) => {
            hljs.highlightBlock(block);
            var wrap = document.createElement("section");
            wrap.setAttribute("aria-label", "Code block");
            block.parentNode.replaceWith(wrap);
            wrap.append(block.parentNode);
            block.classList.add('highlighted');
        });
        elt.querySelectorAll('code.highlight-lines').forEach(function(b) {
            hljs.lineNumbersBlock(b);
            if ((b.innerHTML.trim().match(/\r\n|\r|\n/g) || []).length > 0) {
                b.parentElement.style = "padding-left: 0px !important;"
                b.classList.add('hljs');
            }
            b.classList.remove('highlight-lines');
        });
    }
    window.addEventListener('DOMContentLoaded', function() {
        catsoop.syntax_highlighting(document);
    });
    // @license-end
    </script>
    <style>
    :root {
        --cs-base-bg-color: #0350ba;
        --cs-light-bg-color: #629ced;
        --cs-base-font-color: #fff;
        --cs-light-font-color: #000;
    }
    </style>
    <style>
    .cs_top_menu_item {
        font-size: 0.88rem;
    }

    div.dropdown {
        -moz-transform: translateY(-1px);
    }

    img {
        max-width: 100% !important;
    }
    </style>
    <style>
    [id^=cs_qdiv].question-lab101 [id$=buttons] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101 [id$=nsubmits_left] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101_style2 [id$=buttons] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101_style2 [id$=nsubmits_left] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101_style1 [id$=buttons] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101_style1 [id$=nsubmits_left] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101_style3 [id$=buttons] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101_style3 [id$=nsubmits_left] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101_style4 [id$=buttons] {
        display: none;
    }

    [id^=cs_qdiv].question-lab101_style4 [id$=nsubmits_left] {
        display: none;
    }
    </style>
    <script type="text/javascript">
    // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
    document.addEventListener("DOMContentLoaded", function() {
        sessionStorage.setItem("last-non-settings", catsoop.this_path);
    });
    // @license-end
    </script>
    <script type="text/javascript">
    function reload_code_submit() {
        fetch("?action=render_single_question&name=code_submit")
        .then((result) => {
            return result.text();
        })
        .then(result => {
            document.getElementById("cs_qdiv_code_submit").innerHTML = result;
            catsoop.run_all_scripts("cs_qdiv_code_submit");
        });
    }
    </script>
    <script src="https://py.mit.edu/_static/_handler/default/cs_ajax.js" type="text/javascript"></script>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
</head>
<body style="margin: 0px;">
    <header id="cs_header">
        <div aria-role="menubar" class="nav-container">
            <div class="cs_header_text">
                <a href="https://py.mit.edu/spring24">
                    <img src="https://py.mit.edu/_static/spring24/logo.gif"/>
                     6.101
                </a>
            </div>
            <div class="dropdown" onmouseleave="clearMenu(this);">
                <label class="dropbtn cs_top_menu_item" for="cs_menu_a47c0b052b07cf284d5c1a10c5c01779">
                    Information
                    <span aria-hidden="true" class="downarrow">▼</span>
                </label>
                <input checked="false" class="dropdown-checkbox screenreader-only-clip menu-toplevel" id="cs_menu_a47c0b052b07cf284d5c1a10c5c01779" onblur="catsoop.topMenuFocus(event);" role="menuitemcheckbox" type="checkbox"/>
                <div class="dropdown-content">
                    <a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/basics" onblur="catsoop.topMenuFocus(event);" role="menuitem">Basics and Schedule</a>
                    <a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/grading" onblur="catsoop.topMenuFocus(event);" role="menuitem">Grading Policies</a>
                    <a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/academic_integrity" onblur="catsoop.topMenuFocus(event);" role="menuitem">Academic Integrity</a>
                    <a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/help" onblur="catsoop.topMenuFocus(event);" role="menuitem">Getting Help</a>
                    <a class="cs_top_menu_item menu-submenu" href="https://py.mit.edu/spring24/info/staff" onblur="catsoop.topMenuFocus(event);" role="menuitem">Staff List</a>
                </div>
            </div>
            <a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/readings" onblur="catsoop.topMenuFocus(event);" role="menuitem">Readings</a>
            <a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/queue" onblur="catsoop.topMenuFocus(event);" role="menuitem">Queue</a>
            <a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/progress" onblur="catsoop.topMenuFocus(event);" role="menuitem">Progress</a>
            <a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/infrastructure" onblur="catsoop.topMenuFocus(event);" role="menuitem">Infrastructure</a>
            <a class="cs_top_menu_item menu-toplevel" href="https://py.mit.edu/spring24/labs/lisp_1?loginaction=login" onblur="catsoop.topMenuFocus(event);" role="menuitem">Log In</a>
            <a class="icon" href="javascript:void(0);" onclick="toggleResponsiveHeader()">☰</a>
        </div>
    </header>
    <nav aria-label="Breadcrumbs" class="cs_navigation cs_top_navigation" id="cs_breadcrumbs">
        <li>
            <a href="https://py.mit.edu/spring24">Home</a>
        </li>
        <li>
            <a href="https://py.mit.edu/spring24/labs/lisp_1">LISP Interpreter, Part 1</a>
        </li>
    </nav>
    <div class="cs_body" id="cs_body">
        <div class="cs_left_menu"></div>
        <div class="cs_content">
            <div class="cs_page_body" role="main">
                <center>
                    <h1 class="cs_content_header">LISP Interpreter, Part 1</h1>
                </center>
                <div class="response" id="catsoop_login_box">
                    <b>
                        <center>You are not logged in.</center>
                    </b>
                    <br/>

                    Please
                    <a href="https://py.mit.edu/spring24/labs/lisp_1?loginaction=login">Log
                    In</a>
                     for full access to the web site.
                    <br/>
                    Note that this link will take you to
                    an external site (
                    <tt>https://shimmer.mit.edu</tt>
                    ) to authenticate, and then you will be redirected
                    back to this page.
                </div>
                <style>
                html {
                    color: #333;
                }
                </style>
                <h2 aria-hidden="true">Table of Contents</h2>
                <ul aria-label="Table of Contents" role="navigation">
                    <li>
                        <a href="#_preparation">1) Preparation</a>
                    </li>
                    <li>
                        <a href="#_introduction">2) Introduction</a>
                    </li>
                    <ul>
                        <li>
                            <a href="#_lisp_and_scheme">2.1) LISP and Scheme</a>
                        </li>
                    </ul>
                    <li>
                        <a href="#_interpreter_design">3) Interpreter Design</a>
                    </li>
                    <li>
                        <a href="#_tokenizer">4) Tokenizer</a>
                    </li>
                    <li>
                        <a href="#_parser">5) Parser</a>
                    </li>
                    <ul>
                        <li>
                            <a href="#_examples">5.1) Examples</a>
                        </li>
                    </ul>
                    <li>
                        <a href="#_evaluator">6) Evaluator</a>
                    </li>
                    <ul>
                        <li>
                            <a href="#_evaluator_1_calculator">6.1)  Evaluator 1: Calculator</a>
                        </li>
                        <ul>
                            <li>
                                <a href="#_testing_your_code_repl">6.1.1) Testing Your Code: REPL</a>
                            </li>
                        </ul>
                        <li>
                            <a href="#_additional_operations">6.2) Additional Operations</a>
                        </li>
                        <li>
                            <a href="#_adding_support_for_variables">6.3) Adding Support for Variables</a>
                        </li>
                        <li>
                            <a href="#_frames">6.4) Frames</a>
                        </li>
                        <ul>
                            <li>
                                <a href="#_frames_example">6.4.1) Frames: Example</a>
                            </li>
                            <li>
                                <a href="#_frames_initial_structure">6.4.2) Frames: Initial Structure</a>
                            </li>
                        </ul>
                        <li>
                            <a href="#_evaluator_changes">6.5) Evaluator Changes</a>
                        </li>
                        <ul>
                            <li>
                                <a href="#_changes_to_evaluate">
                                    6.5.1) Changes to
                                    <code>evaluate</code>
                                </a>
                            </li>
                            <li>
                                <a href="#_examples_2">6.5.2) Examples</a>
                            </li>
                        </ul>
                        <li>
                            <a href="#_frames_test_cases_and_the_repl">6.6) Frames, Test Cases, and the REPL</a>
                        </li>
                        <ul>
                            <li>
                                <a href="#_updating_the_repl">6.6.1) Updating the REPL</a>
                            </li>
                        </ul>
                    </ul>
                    <li>
                        <a href="#_functions">7) Functions</a>
                    </li>
                    <ul>
                        <li>
                            <a href="#_defining_functions">7.1) Defining functions</a>
                        </li>
                        <li>
                            <a href="#_calling_functions">7.2) Calling Functions</a>
                        </li>
                        <li>
                            <a href="#_examples_3" label="function_examples">7.3) Examples</a>
                        </li>
                        <li>
                            <a href="#_changes_to_evaluate_2">
                                7.4) Changes to
                                <code>evaluate</code>
                            </a>
                        </li>
                        <li>
                            <a href="#_easier_function_definitions">7.5) Easier Function Definitions</a>
                        </li>
                    </ul>
                    <li>
                        <a href="#_schemeerrors">8) SchemeErrors</a>
                    </li>
                    <li>
                        <a href="#_endnotes">9) Endnotes</a>
                    </li>
                    <li>
                        <a href="#_code_submission">10) Code Submission</a>
                    </li>
                </ul>
                <p>
                    <a class="anchor" name="catsoop_section_1"></a>
                    <a class="anchor" name="_preparation"></a>
                <h2 class="cs_section_title">
                    1) Preparation
                    <a class="cs_permalink" href="#_preparation">§</a>
                </h2>
                </p>
                <p>This lab assumes you have Python 3.11 or later installed on your machine (3.12
                recommended).</p>
                <p>
                    The following file contains code and other resources as a starting point for
                    this lab:
                    <a download="lisp_1.zip" href="https://py.mit.edu/spring24/lab_distribution.zip?path=%5B%22spring24%22%2C+%22labs%22%2C+%22lisp_1%22%5D">
                        <tt>lisp_1.zip</tt>
                    </a>
                </p>
                <p>
                    Most of your changes should be made to
                    <code>lab.py</code>
                    , which you will submit at the
                    end of this lab.  Importantly, you should not add any imports to the file.
                </p>
                <p>Your raw score for this lab will be out of 5 points:</p>
                <ul>
                    <li>answering the questions on this page (0.5 points),</li>
                    <li>passing the server style check (1 point), and</li>
                    <li>
                        passing the test cases in
                        <code>test.py</code>
                         (3.5 points).
                    </li>
                </ul>
                <div class="callout callout-error">
                    <div class="callout-title">Please Read!</div>
                    <p>
                        This is the first part of a two-part lab. Most of the test cases for
                        next week's lab will require all of Lisp Part 1 to work. Because of this,
                        you are
                        <strong>strongly</strong>
                         encouraged to start this lab early if possible. This
                        first part is due 5:00pm on Friday, 03 May.
                    </p>
                </div>
                <div class="callout callout-error">
                    <div class="callout-title">Reminder: Academic Integrity</div>
                    <p>
                        Please also review the
                        <a href="https://py.mit.edu/spring24/info/academic_integrity">academic-integrity policies</a>
                         before
                        continuing.  In particular,
                        <strong>note that you are not allowed to use any code
                        other than that which you have written yourself, including code from online
                        sources, AI, and advanced code-completion tools.</strong>
                    </p>
                </div>
                <p>
                    <a class="anchor" name="catsoop_section_2"></a>
                    <a class="anchor" name="_introduction"></a>
                <h2 class="cs_section_title">
                    2) Introduction
                    <a class="cs_permalink" href="#_introduction">§</a>
                </h2>
                </p>
                <p>
                    Throughout 6.101, we have spent a lot of time discussing the behind-the-scenes
                    operation of Python through environment diagrams.  But you may have wondered
                    along the way: how does Python actually
                    <em>do</em>
                     those things?
                    <em>What</em>
                     is actually
                    doing them?  It turns out that the thing doing that work is another program!
                    In particular, a program called CPython, the Python interpreter, is responsible
                    for interpreting your programs' source code and actually implementing the
                    corresponding behaviors.
                </p>
                <p>
                    In this lab, we'll explore this idea even further by implementing our own
                    interpreter for a dialect of
                    <a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29" target="_blank">LISP</a>
                    ,
                    one of the earliest high-level programming languages and one with a strong
                    historical connection to MIT (LISP was invented by John McCarthy at MIT in
                    1958, and the Scheme dialect of LISP was used in MIT's introductory programming
                    subject from ~1975-2007
                    <a class="anchor" name="catsoop_footnote_ref_1"></a>
                    <a href="#catsoop_footnote_1">
                        <sup>1</sup>
                    </a>
                    !).
                </p>
                <p>
                    The LISP dialect we'll implement in this lab (a variant/subset of Scheme) will
                    be similar to Python in many ways, but in some ways it will be a bit smaller.
                    Its syntax is simpler than Python's, and the complete interpreter will fit in a
                    single Python file.  However, despite its small size, the language we will
                    implement here will be powerful!  We will end up implementing a large portion
                    of the environment model we have been discussing, and our little language will
                    actually be
                    <a href="https://en.wikipedia.org/wiki/Turing_completeness" target="_blank">Turing-complete</a>
                    , i.e., in theory, it will
                    be able to solve any possible computational problem (so it would be possible,
                    for example, to use it to write implementations of any of the labs we have done
                    so far in 6.101!).
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_2_1"></a>
                    <a class="anchor" name="_lisp_and_scheme"></a>
                <h3 class="cs_section_title">
                    2.1) LISP and Scheme
                    <a class="cs_permalink" href="#_lisp_and_scheme">§</a>
                </h3>
                </p>
                <p>As with most LISP dialects, the syntax of Scheme is far simpler than that of
                Python.  All-in-all, we can define the syntax of Scheme as follows:</p>
                <ul>
                    <li>
                        Numbers (e.g.,
                        <code>1</code>
                        ) and symbols (things like variable names, e.g.,
                        <code>x</code>
                        )
                        are called
                        <em>atomic expressions</em>
                        ; they cannot be broken into pieces.
                        These are similar to their Python counterparts, except that in Scheme,
                        operators such as
                        <code>+</code>
                         and
                        <code>&gt;</code>
                         are symbols, too, and are treated the same
                        way as
                        <code>x</code>
                         and
                        <code>fib</code>
                        .
                    </li>
                    <li>
                        Everything else is an
                        <a href="https://en.wikipedia.org/wiki/S-expression" target="_blank">S-expression</a>
                        :
                        an opening round bracket
                        <code>(</code>
                        , followed by zero or more expressions,
                        followed by a closing round bracket
                        <code>)</code>
                        . The first subexpression determines
                        what the S-expression means:
                        <ul>
                            <li>
                                An S-expression starting with a keyword, e.g.
                                <code>(lambda ...)</code>
                                , is a
                                <em>special
                                form</em>
                                ; the meaning depends on the keyword.  We will implement several
                                special forms in this lab, including
                                <code>lambda</code>
                                 (for creating function
                                objects) and
                                <code>define</code>
                                 (for defining variables).
                            </li>
                            <li>
                                An S-expression starting with a non-keyword, e.g.
                                <code>(fib ...)</code>
                                , is a
                                function call, where the first element in the expression is the function
                                to be called.  Note that the first element can be an arbitrary
                                expression.  That is, it does not need to be a single name; it could be a more
                                complicated expression that evaluates to a function object.
                            </li>
                        </ul>
                    </li>
                </ul>
                <p>And that's it!  The whole syntax is described by the two bullet points above.
                For example, consider the following definition of a function that computes
                Fibonacci numbers in Python:</p>
                <pre>
                    <code class="language-py">def fib(n):
                        if n &lt;= 1:
                            return n
                        return fib(n-1) + fib(n-2)
                    </code>
                </pre>
                <p>We could write an equivalent program in Scheme:</p>
                <pre>
                    <code class="language-scheme">(define (fib n)
                        (if (&lt;= n 1)
                          n
                          (+ (fib (- n 1)) (fib (- n 2)))
                        )
                      )
                    </code>
                </pre>
                <p>Here is a brief example of an interaction with a Scheme interpreter that
                demonstrates a few more examples of the structure of the language:</p>
                <pre>
                    <code class="nohighlight">&gt; (+ 3 2)

                      =&gt; 5


                    &gt; (define (square x) (* x x))

                      =&gt; (lambda (x) (* x x))


                    &gt; (define (fourthpower x) (square (square x)))

                      =&gt; (lambda (x) (square (square x)))


                    &gt; (fourthpower 1.1)

                      =&gt; 1.4641000000000004


                    &gt; (+ 3 (- 7 8))

                      =&gt; 2
                    </code>
                </pre>
                <p>There are a couple of key syntactic differences from Python:</p>
                <ul>
                    <li>Scheme consists only of expressions, with no statements.  Every expression evaluates to a value.</li>
                    <li>
                        Scheme uses prefix notation, e.g.,
                        <code>(+ 3 2)</code>
                         instead of
                        <code>3 + 2</code>
                        .
                    </li>
                    <li>Scheme's syntax is simpler but consists of a lot more parentheses.</li>
                </ul>
                <p>
                    Using so many parentheses might take some getting used to, but it helps to keep
                    the language simple and consistent.  Some people have joked that LISP stands
                    for "Lots of Insipid and Silly Parentheses," though some might argue instead
                    that it stands for "LISP Is Syntactically Pure."
                    <code>:)</code>
                </p>
                <center>
                    <img src="https://imgs.xkcd.com/comics/lisp_cycles.png"/>
                    <br/>
                    <small>
                        from
                        <a href="https://xkcd.com/297/" target="_blank">XKCD</a>
                    </small>
                </center>
                <p>
                    <a class="anchor" name="catsoop_section_3"></a>
                    <a class="anchor" name="_interpreter_design"></a>
                <h2 class="cs_section_title">
                    3) Interpreter Design
                    <a class="cs_permalink" href="#_interpreter_design">§</a>
                </h2>
                </p>
                <p>Despite its small size, the interpreter for Scheme will still be rather
                complicated.  To help manage this complexity, we'll start with a very small
                language, and we'll gradually add functionality until we have a fully featured
                language.  As with most interpreters, our Scheme interpreter
                will consist of three parts:</p>
                <ul>
                    <li>
                        A
                        <em>tokenizer</em>
                        , which takes a string as input and produces a list of
                        <em>tokens</em>
                        ,
                        which represent meaningful units in the syntax of the programming language.
                    </li>
                    <li>
                        A
                        <em>parser</em>
                        , which takes the output of the tokenizer as input and produces a
                        structured representation of the program as its output.
                    </li>
                    <li>
                        An
                        <em>evaluator</em>
                        , which takes the output of the parser as input and actually
                        handles running the program.
                    </li>
                </ul>
                <p>
                    <a class="anchor" name="catsoop_section_4"></a>
                    <a class="anchor" name="_tokenizer"></a>
                <h2 class="cs_section_title">
                    4) Tokenizer
                    <a class="cs_permalink" href="#_tokenizer">§</a>
                </h2>
                </p>
                <p>
                    Our first job is
                    <em>tokenizing</em>
                    .  In Scheme, we'll have exactly
                    three kinds of tokens: opening round brackets
                    <code>(</code>
                    , closing round brackets
                    <code>)</code>
                    ,
                    and everything else.  Each token is separated by whitespace (either spaces or
                    the special "newline" character
                    <code>'\n'</code>
                    ).  Your first task for the lab is to
                    write a function called
                    <code>tokenize</code>
                    , which takes a single string representing a
                    program as its input and outputs a list of tokens.  For example, calling
                    <code>tokenize("(foo (bar 3.14))")</code>
                     should give us the following result:
                    <code>['(',
                    'foo', '(', 'bar', '3.14', ')', ')']</code>
                    .  Note that at this point, all of our
                    tokens should be strings.
                </p>
                <p>
                    Unlike in Python, indentation does not matter, so, for example, the
                    <code>tokenize</code>

                    function should produce exactly the same output for both of the following
                    programs:
                </p>
                <pre>
                    <code class="nohighlight">(define circle-area
                      (lambda (r)
                        (* 3.14 (* r r))
                      )
                    )
                    </code>
                </pre>
                <pre>
                    <code class="nohighlight">(define circle-area (lambda (r) (* 3.14 (* r r))))
                    </code>
                </pre>
                <p>
                    Your
                    <code>tokenize</code>
                     function should also handle comments.  A comment in Scheme is
                    prefixed with a semicolon (
                    <code>;</code>
                    ).  If a line contains a semicolon, the
                    <code>tokenize</code>
                     function should not
                    consider that semicolon or the characters that follow it on that line to be
                    part of the input program.  Note that lines are separated by a special character
                    <code>'\n'</code>
                    .
                </p>
                <p>
                    <!--START question q000000 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000000" style="position: static">
                        <div id="q000000_rendered_question">
                            <div id="catsoop_preamble_q000000"></div>
                            <div id="catsoop_prompt_q000000" style="display: inline;">
                                What should be the result of
                                <code>tokenize("(cat (dog (tomato)))")</code>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000000" id="q000000" name="q000000" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000000_buttons"></span>
                            <span id="q000000_loading_wrapper" role="status">
                                <span id="q000000_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000000_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000000_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000000_solution_container">
                            <div id="q000000_solution"></div>
                            <div id="q000000_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000000_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000000 -->
                </p>
                <p>
                    <!--START question tokenize2 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_tokenize2" style="position: static">
                        <div id="tokenize2_rendered_question">
                            <div id="catsoop_preamble_tokenize2"></div>
                            <div id="catsoop_prompt_tokenize2" style="display: inline;">
                                <p>What should be the result of tokenizing the following expression?</p>
                                <pre>
                                    <code class="language-scheme">;add the numbers 2 and 3
                                    (+ ; this expression
                                     2     ; spans multiple
                                     3  ; lines

                                    )
                                    </code>
                                </pre>
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_tokenize2" id="tokenize2" name="tokenize2" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="tokenize2_buttons"></span>
                            <span id="tokenize2_loading_wrapper" role="status">
                                <span id="tokenize2_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="tokenize2_score_display" role="status"></span>
                            <div class="nsubmits_left" id="tokenize2_nsubmits_left" role="status"></div>
                        </div>
                        <div id="tokenize2_solution_container">
                            <div id="tokenize2_solution"></div>
                            <div id="tokenize2_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="tokenize2_message" role="status"></div>
                    </div>
                </section>
                <!--END question tokenize2 -->
                </p>
                <div class="question">
                    <b>Check Yourself:</b>
                    <p>Note that this is similar in many ways to the tokenizer we wrote as part of the
                    symbolic-algebra lab.  What are the key similarities and key differences?
                    How can we modify that tokenizer to work in this context?</p>
                    <p>
                        <span id="queue_checkyourself_1"></span>
                    </p>
                </div>
                <p>
                    Implement the
                    <code>tokenize</code>
                     function in
                    <code>lab.py</code>
                    .  Note that, while doing so, you
                    may find some of the methods of the
                    <a href="https://docs.python.org/3/library/stdtypes.html#textseq">
                        built-in
                        <code>str</code>

                        type
                    </a>
                     useful.
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_5"></a>
                    <a class="anchor" name="_parser"></a>
                <h2 class="cs_section_title">
                    5) Parser
                    <a class="cs_permalink" href="#_parser">§</a>
                </h2>
                </p>
                <p>
                    Our next job is
                    <em>parsing</em>
                     the list of tokens into an
                    <em>abstract syntax tree</em>
                    , a
                    structured representation of the expression to be evaluated.  Implement the
                    <code>parse</code>
                     function in
                    <code>lab.py</code>
                    .
                    <code>parse</code>
                     should take a single input (a list of
                    tokens as produced by
                    <code>tokenize</code>
                    ) and should output a representation of the
                    expression, where:
                </p>
                <ul>
                    <li>
                        A number is represented according to its Python type (i.e., integers as
                        <code>int</code>
                         and decimals as
                        <code>float</code>
                        ).
                    </li>
                    <li>A symbol is represented as a string.</li>
                    <li>An S-expression is represented as a list of its parsed subexpressions.</li>
                </ul>
                <p>
                    For example, the program above that defined
                    <code>circle-area</code>
                     should parse as
                    follows:
                </p>
                <pre>
                    <code class="language-py">['define', 'circle-area', ['lambda', ['r'], ['*', 3.14, ['*', 'r', 'r']]]]
                    </code>
                </pre>
                <p>
                    Note that the syntax of this language is similar to that of the little language
                    we created for symbolic algebra in the previous lab, and so it might be a good
                    idea to structure your parser for this lab in a similar fashion.  One key
                    difference between the two languages is that, while our symbolic-algebra
                    language always had exactly two subexpressions to parse inside of parentheses,
                    S-expressions can contain arbitrarily many subexpressions.  Another is that we
                    will handle malformed input graciously; in particular, in the case where
                    an expression is not well-formed, the function should raise a
                    <code>SchemeSyntaxError</code>
                    .
                </p>
                <p>
                    <strong>
                        Your code in this lab (including
                        <code>parse</code>
                        ) should not use Python's built-in
                        <code>eval</code>
                         or
                        <code>exec</code>
                         functions.
                    </strong>
                </p>
                <p>
                    Note that we have also provided a function
                    <code>number_or_symbol</code>
                     in
                    <code>lab.py</code>
                    ,
                    which you can use to check whether a given string represents a number and to
                    convert to the appropriate type if necessary.  This function may be useful when
                    thinking about differentiating between symbols and numbers in your parser.
                </p>
                <p>You may also find the following questions helpful before jumping into your
                implementation (and you may even want to encode these, or similar examples, as
                doctests in your code).</p>
                <p>
                    <a class="anchor" name="catsoop_section_5_1"></a>
                    <a class="anchor" name="_examples"></a>
                <h3 class="cs_section_title">
                    5.1) Examples
                    <a class="cs_permalink" href="#_examples">§</a>
                </h3>
                </p>
                <p>
                    <!--START question q000001 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000001" style="position: static">
                        <div id="q000001_rendered_question">
                            <div id="catsoop_preamble_q000001"></div>
                            <div id="catsoop_prompt_q000001" style="display: inline;">
                                What should be the result of calling
                                <code>parse</code>
                                 on the output from the first concept question above?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000001" id="q000001" name="q000001" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000001_buttons"></span>
                            <span id="q000001_loading_wrapper" role="status">
                                <span id="q000001_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000001_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000001_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000001_solution_container">
                            <div id="q000001_solution"></div>
                            <div id="q000001_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000001_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000001 -->
                </p>
                <p>
                    <!--START question parse2 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_parse2" style="position: static">
                        <div id="parse2_rendered_question">
                            <div id="catsoop_preamble_parse2"></div>
                            <div id="catsoop_prompt_parse2" style="display: inline;">
                                What should be the result of calling
                                <span class="hl">
                                    <code class="lang-py">parse(['2'])</code>
                                </span>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_parse2" id="parse2" name="parse2" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="parse2_buttons"></span>
                            <span id="parse2_loading_wrapper" role="status">
                                <span id="parse2_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="parse2_score_display" role="status"></span>
                            <div class="nsubmits_left" id="parse2_nsubmits_left" role="status"></div>
                        </div>
                        <div id="parse2_solution_container">
                            <div id="parse2_solution"></div>
                            <div id="parse2_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="parse2_message" role="status"></div>
                    </div>
                </section>
                <!--END question parse2 -->
                </p>
                <p>
                    <!--START question parse3 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_parse3" style="position: static">
                        <div id="parse3_rendered_question">
                            <div id="catsoop_preamble_parse3"></div>
                            <div id="catsoop_prompt_parse3" style="display: inline;">
                                What should be the result of calling
                                <span class="hl">
                                    <code class="lang-py">parse(['x'])</code>
                                </span>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_parse3" id="parse3" name="parse3" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="parse3_buttons"></span>
                            <span id="parse3_loading_wrapper" role="status">
                                <span id="parse3_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="parse3_score_display" role="status"></span>
                            <div class="nsubmits_left" id="parse3_nsubmits_left" role="status"></div>
                        </div>
                        <div id="parse3_solution_container">
                            <div id="parse3_solution"></div>
                            <div id="parse3_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="parse3_message" role="status"></div>
                    </div>
                </section>
                <!--END question parse3 -->
                </p>
                <p>
                    <!--START question parse4 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_parse4" style="position: static">
                        <div id="parse4_rendered_question">
                            <div id="catsoop_preamble_parse4"></div>
                            <div id="catsoop_prompt_parse4" style="display: inline;">
                                What should be the result of calling
                                <span class="hl">
                                    <code class="lang-py">parse(['(', '+', '2', '(', '-', '5', '3', ')', '7', '8', ')'])</code>
                                </span>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_parse4" id="parse4" name="parse4" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="parse4_buttons"></span>
                            <span id="parse4_loading_wrapper" role="status">
                                <span id="parse4_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="parse4_score_display" role="status"></span>
                            <div class="nsubmits_left" id="parse4_nsubmits_left" role="status"></div>
                        </div>
                        <div id="parse4_solution_container">
                            <div id="parse4_solution"></div>
                            <div id="parse4_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="parse4_message" role="status"></div>
                    </div>
                </section>
                <!--END question parse4 -->
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6"></a>
                    <a class="anchor" name="_evaluator"></a>
                <h2 class="cs_section_title">
                    6) Evaluator
                    <a class="cs_permalink" href="#_evaluator">§</a>
                </h2>
                </p>
                <blockquote>
                    <i>"How do you eat a big pizza?  One little bite at at time..."</i>
                    <br/>

                    -Anonymous
                </blockquote>
                <p>
                    After parsing, we have the program in a form that is (relatively) easy to work
                    with, and we can move on to implementing the
                    <em>evaluator</em>
                    , which will handle
                    actually running the program.  This part of the interpreter will get fairly
                    complicated, so we will start small and add in more pieces later.  We will make
                    several "false steps" along the way, where we'll need to make modifications to
                    pieces we had implemented earlier.
                </p>
                <p>
                    <strong>
                        Because of this, it will be useful to save backups of your
                        <code>lab.py</code>
                         file
                        after every major modification (maybe every time you get some new test cases to
                        pass or every time you finish a new piece of functionality), so that if
                        something goes wrong, you can revert to a working copy.
                    </strong>
                </p>
                <p>Note that you can also submit your lab code as many times as you like and that
                you can use this page to access files that you had previously submitted, so that
                can serve as another way to back up your work.</p>
                <p>
                    <a class="anchor" name="catsoop_section_6_1"></a>
                    <a class="anchor" name="_evaluator_1_calculator"></a>
                <h3 class="cs_section_title">
                    6.1)  Evaluator 1: Calculator
                    <a class="cs_permalink" href="#_evaluator_1_calculator">§</a>
                </h3>
                </p>
                <p>
                    We'll hold off on implementing variables, lists, conditionals, and functions
                    for a little while; for now, we'll start by implementing a small calculator
                    that can handle the
                    <code>+</code>
                     and
                    <code>-</code>
                     operations.
                </p>
                <p>
                    Note that we have provided a dictionary called
                    <code>scheme_builtins</code>
                     in
                    <code>lab.py</code>
                    ,
                    which maps the names
                    <code>+</code>
                     and
                    <code>-</code>
                     to functions.  Each of these functions takes a
                    list as an argument and returns the appropriate value.  Look at the
                    <code>scheme_builtins</code>
                     dictionary to get a sense of the form of those functions.
                </p>
                <p>
                    Define a function
                    <code>evaluate</code>
                    , which takes as its sole input an expression of
                    the same form as the parser's output.
                    <code>evaluate</code>
                     should return the value of
                    the expression:
                </p>
                <ul>
                    <li>
                        If the expression is a symbol, it should return the object associated with the
                        symbol in
                        <code>scheme_builtins</code>
                        . If the symbol is not in
                        <code>scheme_builtins</code>
                        , it
                        should raise a
                        <code>SchemeNameError</code>
                        .
                    </li>
                    <li>If the expression is a number, it should return that number.</li>
                    <li>
                        If the expression is a list (representing an S-expression), each of the
                        elements in the list should be evaluated, and the result of evaluating the first
                        element (a function) should be called with the remaining elements passed in as
                        arguments
                        <a class="anchor" name="catsoop_footnote_ref_2"></a>
                        <a href="#catsoop_footnote_2">
                            <sup>2</sup>
                        </a>
                        . The overall result of evaluating such a function is
                        the return value of that function call.
                    </li>
                    <li>
                        If the expression is a list whose first element evaluates to something that is
                        not a
                        <a href="https://docs.python.org/3/library/functions.html#callable">callable function</a>
                        ,
                        it should raise a
                        <code>SchemeEvaluationError</code>
                        <a class="anchor" name="catsoop_footnote_ref_3"></a>
                        <a href="#catsoop_footnote_3">
                            <sup>3</sup>
                        </a>
                        .
                    </li>
                </ul>
                <p>For example:</p>
                <ul>
                    <li>
                        <span class="hl">
                            <code class="lang-py">evaluate('+')</code>
                        </span>
                         should return the function object associated with addition.
                    </li>
                    <li>
                        <span class="hl">
                            <code class="lang-py">evaluate(3.14)</code>
                        </span>
                         should return
                        <code>3.14</code>
                        .
                    </li>
                    <li>
                        <span class="hl">
                            <code class="lang-py">evaluate(['+', 3, 7, 2])</code>
                        </span>
                        , which corresponds to
                        <code>(+ 3 7 2)</code>
                        , should return
                        <code>12</code>
                         (i.e., the result of calling the
                        <code>+</code>
                         function on the given arguments).
                    </li>
                </ul>
                <p>
                    Note that this should work for nested expressions as well.
                    <span class="hl">
                        <code class="lang-py">evaluate(['+', 3, ['-', 7, 5]])</code>
                    </span>
                    , which corresponds to
                    <code>(+ 3 (- 7 5))</code>
                    , should return
                    <code>5</code>
                    .
                </p>
                <p>
                    Implement the
                    <code>evaluate</code>
                     function in
                    <code>lab.py</code>
                     according to the rules above.
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6_1_1"></a>
                    <a class="anchor" name="_testing_your_code_repl"></a>
                <h4 class="cs_section_title">
                    6.1.1) Testing Your Code: REPL
                    <a class="cs_permalink" href="#_testing_your_code_repl">§</a>
                </h4>
                </p>
                <p>
                    It is kind of a pain to have to type out all of the arguments to
                    <code>evaluate</code>

                    each time we call it.
                </p>
                <p>
                    As such, we've provided a REPL (a "
                    <strong>R</strong>
                    ead,
                    <strong>E</strong>
                    valuate,
                    <strong>P</strong>
                    rint
                    <strong>L</strong>
                    oop")
                    for Scheme in your
                    <code>lab.py</code>
                     file.  A REPL has a simple job: it continually
                    prompts the user for input until they type
                    <code>QUIT</code>
                    .  Until then, it:
                </p>
                <ul>
                    <li>accepts input from the user,</li>
                    <li>tokenizes and parses it,</li>
                    <li>evaluates it, and</li>
                    <li>prints the result.</li>
                </ul>
                <p>
                    The REPL is implemented in a rather-obtuse class called
                    <code>SchemeREPL</code>
                     in your
                    <code>lab.py</code>
                     file.  You don't have to worry too much about this code if you don't
                    want to; its job is to provide a nice interface for interacting with our
                    interpreter.  Here is one sample interaction with the REPL:
                </p>
                <pre>
                    <code class="language-nohighlight">in&gt; (+ 2 3)
                      out&gt; 5
                    in&gt; (+ 2 (- 3 4))
                      out&gt; 1
                    in&gt; (- 3.14 1.14 1)
                      out&gt; 1.0000000000000004
                    in&gt; (+ 2 (- 3 4 5))
                      out&gt; -4
                    in&gt; QUIT
                    </code>
                </pre>
                <p>Note that the REPL only handles one-line inputs.</p>
                <p>
                    By default, if your code raises a
                    <code>SchemeError</code>
                     (or an instance of one of its
                    subclasses), the REPL will display some information about that exception but
                    not exit.  While this is the usual behavior we might expect from a REPL, it can
                    be useful to see more information (such as a traceback) while debugging.  To
                    that end, if you change the value associated with
                    <code>verbose</code>
                     in the last line of
                    <code>lab.py</code>
                     from
                    <code>verbose=False</code>
                     to
                    <code>verbose=True</code>
                    , the REPL will show a full
                    traceback, which can be a useful way to figure out what line is causing the
                    error. While the traceback is helpful, we strongly encourage you to include
                    descriptive messages when you raise errors i.e.
                    <code>raise
                    SchemeEvaluationError(f"Wrong number of arguments provided to custom
                    function")</code>
                </p>
                <p>
                    Moving forward, we expect that
                    <strong>the REPL can and should be one of your main
                    means of testing</strong>
                    ; feel free to try things out using the REPL as you work
                    through the remainder of the lab (by running the code from our test cases and
                    seeing its output and/or by writing code of your own!). Importantly, when you
                    make changes to your
                    <code>lab.py</code>
                     file you should save it and restart the REPL in
                    order to observe what effect the changes made.
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6_2"></a>
                    <a class="anchor" name="_additional_operations"></a>
                <h3 class="cs_section_title">
                    6.2) Additional Operations
                    <a class="cs_permalink" href="#_additional_operations">§</a>
                </h3>
                </p>
                <p>
                    Implement two new operations:
                    <code>*</code>
                     and
                    <code>/</code>
                    :
                </p>
                <ul>
                    <li>
                        <code>*</code>
                         should take arbitrarily many arguments and should return the product of
                        all its arguments.
                    </li>
                    <li>
                        <code>/</code>
                         should take arbitrarily many arguments.  It should return the result of
                        successively dividing the first argument by the remaining arguments
                        <a class="anchor" name="catsoop_footnote_ref_4"></a>
                        <a href="#catsoop_footnote_4">
                            <sup>4</sup>
                        </a>
                        .
                    </li>
                </ul>
                <p>
                    (
                    <em>Hint:</em>
                     where can you put these operations so that they are usable by the interpreter?)
                </p>
                <p>
                    After implementing the evaluator and the
                    <code>*</code>
                     and
                    <code>/</code>
                     operations, try them out
                    in the REPL.
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6_3"></a>
                    <a class="anchor" name="_adding_support_for_variables"></a>
                <h3 class="cs_section_title">
                    6.3) Adding Support for Variables
                    <a class="cs_permalink" href="#_adding_support_for_variables">§</a>
                </h3>
                </p>
                <p>
                    Next, we will implement our first special form:
                    <em>variable definition</em>
                     using the
                    <code>define</code>
                     keyword.
                </p>
                <p>
                    A variable definition has the following syntax:
                    <code>(define NAME EXPR)</code>
                    , where
                    <code>NAME</code>
                     is a symbol and
                    <code>EXPR</code>
                     is an arbitrary expression.  When Scheme
                    evaluates a
                    <code>define</code>
                     expression, it should associate the name
                    <code>NAME</code>
                     with the
                    value that results from evaluating
                    <code>EXPR</code>
                    .  In addition, the
                    <code>define</code>

                    expression should evaluate to the result of evaluating
                    <code>EXPR</code>
                    <a class="anchor" name="catsoop_footnote_ref_5"></a>
                    <a href="#catsoop_footnote_5">
                        <sup>5</sup>
                    </a>
                    .
                </p>
                <p>
                    The following transcript shows an example interaction using the
                    <code>define</code>

                    keyword:
                </p>
                <pre>
                    <code class="nohighlight">in&gt; (define pi 3.14)
                      out&gt; 3.14

                    in&gt; (define radius 2)
                      out&gt; 2

                    in&gt; (* pi radius radius)
                      out&gt; 12.56

                    in&gt; QUIT
                    </code>
                </pre>
                <p>
                    Note that
                    <code>define</code>
                     differs from the function calls we saw earlier.  It is a
                    <em>special form</em>
                     that does not evaluate the name that follows it; it only
                    evaluates the expression that follows the name.  As such, we will have to treat
                    it differently from a normal function call.
                </p>
                <p>
                    In addition, in order to think about how to implement
                    <code>define</code>
                    , we will need to
                    talk about the notion of
                    <em>frames</em>
                    .
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6_4"></a>
                    <a class="anchor" name="_frames"></a>
                <h3 class="cs_section_title">
                    6.4) Frames
                    <a class="cs_permalink" href="#_frames">§</a>
                </h3>
                </p>
                <p>
                    Admitting variable definition into our language means that we need to be, in
                    some sense, more careful with the process by which expressions are evaluated.
                    We will handle the complexity associated with variable definition by
                    maintaining structures called
                    <em>frames</em>
                     (which should be familiar from our
                    environment diagrams).  A frame consists of bindings from variable names to
                    values, as well as possibly a parent frame, from which other bindings are
                    inherited.  One can look up a name in a frame, and one can bind names to
                    values in a frame.
                </p>
                <p>
                    The frame is crucial to the evaluation process, because it determines the
                    context in which an expression should be evaluated.  Indeed, one could say that
                    expressions in a programming language do not, in themselves, have any meanings.
                    Rather, an expression acquires a meaning only with respect to some frame
                    in which it is evaluated.  Even the interpretation of an expression as
                    straightforward as
                    <code>(+ 1 1)</code>
                     depends on an understanding that one is operating
                    in a context in which + is the symbol for addition.  Thus, in our model of
                    evaluation we will always speak of evaluating an expression
                    <em>with respect to
                    some frame</em>
                    .
                </p>
                <p>
                    To describe interactions with the interpreter, we will suppose that there is a
                    "built-in" frame, consisting of bindings of the names of built-in functions
                    and constants to their associated values.  For example, the idea that
                    <code>+</code>
                     is
                    the symbol for addition is captured by saying that the symbol
                    <code>+</code>
                     is bound in
                    this frame to the primitive addition procedure we defined above.  The global
                    frame will have this frame as its parent.
                </p>
                <p>One necessary operation on frames is looking up the value to which a
                given name is bound.  To do this, we can follow these steps:</p>
                <ul>
                    <li>If the name has a binding in the frame, that value is returned.</li>
                    <li>If the name does not have a binding in the frame and the frame
                    has a parent, we look up the name in the parent frame (following these
                    same steps).</li>
                    <li>
                        If the name does not have a binding in the frame and the frame
                        does not have a parent, a
                        <code>SchemeNameError</code>
                         is raised.
                    </li>
                </ul>
                <p>Note that looking up a name in a frame is similar to looking up a key in
                a dictionary, except that if the key is not found, we continue looking in
                parent frames until we find the key or we run out of parents to look in.</p>
                <p>
                    In order to make variables work properly, you will need to implement the kind
                    of lookup described above in Python.  To this end,
                    <strong>you should create a class
                    to represent frames</strong>
                    .
                </p>
                <div class="question">
                    <b>Check Yourself:</b>
                    <p>
                    <p>What information should be stored as instance attributes of this class?  What
                    kind of methods should the class support?
                    </p>
                    </p>
                    <p>
                        <span id="queue_checkyourself_2"></span>
                    </p>
                </div>
                <p>
                    It is up to you to decide how exactly to implement frames and the
                    associated lookups within this structure.  Details of your implementation will
                    not be tested directly by the automatic checker; rather, your implementation
                    will be tested by looking at the end-to-end behavior of your evaluator.
                    Regardless of the details of your implementation,
                    <strong>you should make sure your
                    frame representation can handle variables with arbitrary names</strong>
                     (i.e.,
                    any sequence of characters that doesn't represent a number and that doesn't
                    contain parentheses or spaces should be treated as a variable name).
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6_4_1"></a>
                    <a class="anchor" name="_frames_example"></a>
                <h4 class="cs_section_title">
                    6.4.1) Frames: Example
                    <a class="cs_permalink" href="#_frames_example">§</a>
                </h4>
                </p>
                <p>
                    The following shows an example of a frame structure, where arrows
                    indicate each frame's parent, if any.  Here we have four frames
                    (each of which might be an instance of the class you created to represent
                    frames), labeled
                    <strong>F1</strong>
                    ,
                    <strong>F2</strong>
                    ,
                    <strong>F3</strong>
                    , and
                    <strong>F4</strong>
                    .  Both
                    <strong>F2</strong>
                     and
                    <strong>F3</strong>
                     have
                    <strong>F1</strong>
                     as a parent frame, and
                    <strong>F4</strong>
                     has
                    <strong>F3</strong>
                     as a parent
                    frame.
                    <strong>F1</strong>
                     does not have a parent frame.
                </p>
                <center>
                    <img src="https://py.mit.edu/_static/spring24/labs/lisp_1/env1.png" style="width: 3in"/>
                </center>
                <p>
                    We say that the values
                    <code>x</code>
                    ,
                    <code>y</code>
                    , and
                    <code>z</code>
                     are
                    <em>bound</em>
                     in
                    <strong>F1</strong>
                    .  Note that
                    <code>x</code>

                    and
                    <code>y</code>
                     are bound in
                    <strong>F2</strong>
                    ,
                    <code>x</code>
                     is bound in
                    <strong>F3</strong>
                    , and
                    <code>a</code>
                     is bound in
                    <strong>F4</strong>
                    .  Looking up a name, we work our way up the arrows until we find the
                    name we are looking for.  For example, looking up
                    <code>a</code>
                     in
                    <strong>F4</strong>
                     gives us the
                    value
                    <code>1</code>
                    , and looking up
                    <code>z</code>
                     in
                    <strong>F4</strong>
                     gives us
                    <code>5</code>
                    .
                </p>
                <p>Notice that, as was mentioned above, the frame is crucial for determining
                the result of an expression.</p>
                <p>
                    <!--START question q000002 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000002" style="position: static">
                        <div id="q000002_rendered_question">
                            <div id="catsoop_preamble_q000002"></div>
                            <div id="catsoop_prompt_q000002" style="display: inline;">
                                What is the result of evaluating
                                <code>x</code>
                                 in
                                <strong>F1</strong>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000002" id="q000002" name="q000002" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000002_buttons"></span>
                            <span id="q000002_loading_wrapper" role="status">
                                <span id="q000002_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000002_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000002_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000002_solution_container">
                            <div id="q000002_solution"></div>
                            <div id="q000002_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000002_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000002 -->
                </p>
                <p>
                    <!--START question q000003 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000003" style="position: static">
                        <div id="q000003_rendered_question">
                            <div id="catsoop_preamble_q000003"></div>
                            <div id="catsoop_prompt_q000003" style="display: inline;">
                                What is the result of evaluating
                                <code>x</code>
                                 in
                                <strong>F2</strong>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000003" id="q000003" name="q000003" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000003_buttons"></span>
                            <span id="q000003_loading_wrapper" role="status">
                                <span id="q000003_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000003_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000003_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000003_solution_container">
                            <div id="q000003_solution"></div>
                            <div id="q000003_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000003_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000003 -->
                </p>
                <p>
                    <!--START question q000004 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000004" style="position: static">
                        <div id="q000004_rendered_question">
                            <div id="catsoop_preamble_q000004"></div>
                            <div id="catsoop_prompt_q000004" style="display: inline;">
                                What is the result of evaluating
                                <code>x</code>
                                 in
                                <strong>F3</strong>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000004" id="q000004" name="q000004" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000004_buttons"></span>
                            <span id="q000004_loading_wrapper" role="status">
                                <span id="q000004_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000004_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000004_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000004_solution_container">
                            <div id="q000004_solution"></div>
                            <div id="q000004_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000004_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000004 -->
                </p>
                <p>
                    <!--START question q000005 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000005" style="position: static">
                        <div id="q000005_rendered_question">
                            <div id="catsoop_preamble_q000005"></div>
                            <div id="catsoop_prompt_q000005" style="display: inline;">
                                What is the result of evaluating
                                <code>x</code>
                                 in
                                <strong>F4</strong>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000005" id="q000005" name="q000005" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000005_buttons"></span>
                            <span id="q000005_loading_wrapper" role="status">
                                <span id="q000005_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000005_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000005_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000005_solution_container">
                            <div id="q000005_solution"></div>
                            <div id="q000005_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000005_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000005 -->
                </p>
                <p>
                    Also note that the
                    <code>define</code>
                     keyword always operates directly on the frame
                    in which it is evaluated.  If we were to evaluate
                    <code>(define y 8)</code>
                     in
                    <strong>F4</strong>
                    ,
                    this would result in a new binding inside of
                    <strong>F4</strong>
                     (without affecting the
                    parent frames):
                </p>
                <center>
                    <img src="https://py.mit.edu/_static/spring24/labs/lisp_1/env2.png" style="width: 3in"/>
                </center>
                <p>Answer the following questions about variable lookup in this updated
                frame:</p>
                <p>
                    <!--START question q000006 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000006" style="position: static">
                        <div id="q000006_rendered_question">
                            <div id="catsoop_preamble_q000006"></div>
                            <div id="catsoop_prompt_q000006" style="display: inline;">
                                What is the result of evaluating
                                <code>y</code>
                                 in
                                <strong>F1</strong>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000006" id="q000006" name="q000006" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000006_buttons"></span>
                            <span id="q000006_loading_wrapper" role="status">
                                <span id="q000006_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000006_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000006_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000006_solution_container">
                            <div id="q000006_solution"></div>
                            <div id="q000006_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000006_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000006 -->
                </p>
                <p>
                    <!--START question q000007 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000007" style="position: static">
                        <div id="q000007_rendered_question">
                            <div id="catsoop_preamble_q000007"></div>
                            <div id="catsoop_prompt_q000007" style="display: inline;">
                                What is the result of evaluating
                                <code>y</code>
                                 in
                                <strong>F2</strong>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000007" id="q000007" name="q000007" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000007_buttons"></span>
                            <span id="q000007_loading_wrapper" role="status">
                                <span id="q000007_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000007_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000007_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000007_solution_container">
                            <div id="q000007_solution"></div>
                            <div id="q000007_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000007_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000007 -->
                </p>
                <p>
                    <!--START question q000008 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000008" style="position: static">
                        <div id="q000008_rendered_question">
                            <div id="catsoop_preamble_q000008"></div>
                            <div id="catsoop_prompt_q000008" style="display: inline;">
                                What is the result of evaluating
                                <code>y</code>
                                 in
                                <strong>F3</strong>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000008" id="q000008" name="q000008" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000008_buttons"></span>
                            <span id="q000008_loading_wrapper" role="status">
                                <span id="q000008_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000008_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000008_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000008_solution_container">
                            <div id="q000008_solution"></div>
                            <div id="q000008_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000008_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000008 -->
                </p>
                <p>
                    <!--START question q000009 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000009" style="position: static">
                        <div id="q000009_rendered_question">
                            <div id="catsoop_preamble_q000009"></div>
                            <div id="catsoop_prompt_q000009" style="display: inline;">
                                What is the result of evaluating
                                <code>y</code>
                                 in
                                <strong>F4</strong>
                                ?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000009" id="q000009" name="q000009" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000009_buttons"></span>
                            <span id="q000009_loading_wrapper" role="status">
                                <span id="q000009_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000009_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000009_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000009_solution_container">
                            <div id="q000009_solution"></div>
                            <div id="q000009_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000009_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000009 -->
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6_4_2"></a>
                    <a class="anchor" name="_frames_initial_structure"></a>
                <h4 class="cs_section_title">
                    6.4.2) Frames: Initial Structure
                    <a class="cs_permalink" href="#_frames_initial_structure">§</a>
                </h4>
                </p>
                <p>Running a program in this language typically involves evaluating multiple
                expressions, one after the other, in the same frame, and so we will take
                a moment here to think about what the initial structure of these frames
                should look like.</p>
                <p>
                    When we first start a new REPL, we will need to think about two main
                    frames: a frame to hold the
                    <em>built-in</em>
                     values (such as the
                    <code>+</code>

                    function) and a "global" frame where top-level definitions from users'
                    programs will be bound.  Then, every expression we provide to the REPL should
                    be evaluated in that global frame.
                </p>
                <p>For example, running the code below from the REPL should result in the
                frame structure shown in the picture that follows:</p>
                <pre>
                    <code class="nohighlight">in&gt; (define x 3)
                      out&gt; 3

                    in&gt; (define y 4)
                      out&gt; 4
                    </code>
                </pre>
                <center>
                    <img src="https://py.mit.edu/_static/spring24/labs/lisp_1/env_example.png" style="width: 2.5in"/>
                </center>
                <p>Note that  when we look up any of the built-in variables from the global
                frame, we end up finding them in the built-ins frame.</p>
                <p>
                    <a class="anchor" name="catsoop_section_6_5"></a>
                    <a class="anchor" name="_evaluator_changes"></a>
                <h3 class="cs_section_title">
                    6.5) Evaluator Changes
                    <a class="cs_permalink" href="#_evaluator_changes">§</a>
                </h3>
                </p>
                <p>
                    Now, we'll need to add support for variable definition and lookup to our
                    interpreter by implementing a Python structure for representing a frame
                    and modifying our interpreter so that it handles variables and the
                    <code>define</code>
                     keyword.
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6_5_1"></a>
                    <a class="anchor" name="_changes_to_evaluate"></a>
                <h4 class="cs_section_title">
                    6.5.1) Changes to
                    <code>evaluate</code>
                    <a class="cs_permalink" href="#_changes_to_evaluate">§</a>
                </h4>
                </p>
                <p>
                    Beyond implementing a representation for frames, we will need to make
                    some modifications to our
                    <code>evaluate</code>
                     function.  We will need to:
                </p>
                <ul>
                    <li>
                        modify
                        <code>evaluate</code>
                         so that it takes a second (optional) argument: the
                        frame in which the expression should be evaluated.  If no frame
                        is passed in, an empty frame should be used, whose parent is a
                        frame containing all the bindings from the
                        <code>scheme_builtins</code>

                        dictionary.
                    </li>
                    <li>
                        make sure that
                        <code>evaluate</code>
                         handles the
                        <code>define</code>
                         keyword properly, evaluating
                        the given expression and storing the result in the frame that was
                        passed to
                        <code>evaluate</code>
                        .
                    </li>
                    <li>
                        modify the way symbols are handled in
                        <code>evaluate</code>
                        , so that if the symbol
                        exists as a key in the frame (or a parent frame),
                        <code>evaluate</code>

                        returns the associated value.
                    </li>
                </ul>
                <p>
                    <a class="anchor" name="catsoop_section_6_5_2"></a>
                    <a class="anchor" name="_examples_2"></a>
                <h4 class="cs_section_title">
                    6.5.2) Examples
                    <a class="cs_permalink" href="#_examples_2">§</a>
                </h4>
                </p>
                <p>Consider evaluating the following expressions in order from the same REPL
                (i.e., in the same frame).  What is the result of evaluating each of
                these expressions?</p>
                <p>
                    <!--START question q000010 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000010" style="position: static">
                        <div id="q000010_rendered_question">
                            <div id="catsoop_preamble_q000010"></div>
                            <div id="catsoop_prompt_q000010" style="display: inline;">
                                input:
                                <code>(+ 3 2 4 (- 2 7 8))</code>
                                <br/>
                                output:
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000010" id="q000010" name="q000010" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000010_buttons"></span>
                            <span id="q000010_loading_wrapper" role="status">
                                <span id="q000010_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000010_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000010_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000010_solution_container">
                            <div id="q000010_solution"></div>
                            <div id="q000010_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000010_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000010 -->
                </p>
                <p>
                    <!--START question q000011 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000011" style="position: static">
                        <div id="q000011_rendered_question">
                            <div id="catsoop_preamble_q000011"></div>
                            <div id="catsoop_prompt_q000011" style="display: inline;">
                                input:
                                <code>(define x (+ 2 3))</code>
                                <br/>
                                output:
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000011" id="q000011" name="q000011" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000011_buttons"></span>
                            <span id="q000011_loading_wrapper" role="status">
                                <span id="q000011_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000011_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000011_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000011_solution_container">
                            <div id="q000011_solution"></div>
                            <div id="q000011_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000011_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000011 -->
                </p>
                <p>
                    <!--START question q000012 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000012" style="position: static">
                        <div id="q000012_rendered_question">
                            <div id="catsoop_preamble_q000012"></div>
                            <div id="catsoop_prompt_q000012" style="display: inline;">
                                input:
                                <code>(define x2 (* x x))</code>
                                <br/>
                                output:
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000012" id="q000012" name="q000012" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000012_buttons"></span>
                            <span id="q000012_loading_wrapper" role="status">
                                <span id="q000012_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000012_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000012_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000012_solution_container">
                            <div id="q000012_solution"></div>
                            <div id="q000012_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000012_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000012 -->
                </p>
                <p>
                    <!--START question q000013 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_q000013" style="position: static">
                        <div id="q000013_rendered_question">
                            <div id="catsoop_preamble_q000013"></div>
                            <div id="catsoop_prompt_q000013" style="display: inline;">
                                input:
                                <code>(+ x2 x)</code>
                                <br/>
                                output:
                            </div>
                            <input aria-labelledby="catsoop_prompt_q000013" id="q000013" name="q000013" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="q000013_buttons"></span>
                            <span id="q000013_loading_wrapper" role="status">
                                <span id="q000013_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000013_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000013_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000013_solution_container">
                            <div id="q000013_solution"></div>
                            <div id="q000013_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000013_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000013 -->
                </p>
                <p>
                    <strong>These can make for some nice test cases when you implement your code!</strong>
                      You
                    may also wish to test some other similar examples in your REPL to make sure
                    things are working as expected.
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_6_6"></a>
                    <a class="anchor" name="_frames_test_cases_and_the_repl"></a>
                <h3 class="cs_section_title">
                    6.6) Frames, Test Cases, and the REPL
                    <a class="cs_permalink" href="#_frames_test_cases_and_the_repl">§</a>
                </h3>
                </p>
                <p>All of the tests from this point on involve using your interpreter to run
                small programs by evaluating multiple expressions one after the other in the
                same frame.</p>
                <p>
                    To make this kind of automatic checking possible, you should define a function
                    called
                    <code>make_initial_frame</code>
                    .  This function should take no arguments and should
                    return a single new frame representing the global frame (i.e., an empty frame
                    that has the builtins as its parent).
                </p>
                <p>All test cases moving forward will use this function to simulate, in some
                sense, starting up a brand-new REPL and evaluating multiple expressions at
                that REPL in order. We do this by:</p>
                <ul>
                    <li>
                        Calling
                        <code>make_initial_frame</code>
                         to create a brand-new frame, and then
                    </li>
                    <li>
                        calling
                        <code>evaluate</code>
                         for each subsequent expression, each time passing in
                        the frame created in the first step (so that they all work
                        in the same frame).
                    </li>
                </ul>
                <div class="callout callout-note">
                    <div class="callout-title">Real Programs in the Test Cases!</div>
                    <p>
                        Note also that we are working with authentic programs here; and for each test
                        case moving forward, there is a corresponding file in the
                        <code>test_inputs</code>
                         directory
                        in the code distribution; these files contain the expressions that are
                        evaluated in the associated test cases, with one expression on each line.  A
                        good exercise if you are failing a test case would be to figure out by hand
                        what each expression should evaluate to and then try them by pasting one line
                        at a time into your REPL.  Note that you should be able to open these files
                        in your normal text editor (and some editors may even provide syntax
                        highlighting for Scheme!).
                    </p>
                    <p>If you are having trouble opening these files or figuring out why
                    a given expression evaluates the way it does, please
                    don't hesitate to ask for help!</p>
                </div>
                <p>
                    <a class="anchor" name="catsoop_section_6_6_1"></a>
                    <a class="anchor" name="_updating_the_repl"></a>
                <h4 class="cs_section_title">
                    6.6.1) Updating the REPL
                    <a class="cs_permalink" href="#_updating_the_repl">§</a>
                </h4>
                </p>
                <p>Incorporating frames also requires changing our code for the REPL so that all
                of the inputs we provide are run in the same frame, so that variables we define
                at the REPL can be used in later expressions, like so:</p>
                <pre>
                    <code class="language-nohighlight">in&gt; (define x 7)
                        out&gt; 7

                    in&gt; (+ x 10)
                        out&gt; 17
                    </code>
                </pre>
                <p>
                    As before, we have implemented this change for you; but it is necessary to change
                    the value associated with
                    <code>use_frames</code>
                     on the last line of
                    <code>lab.py</code>
                     from
                    <code>use_frames=False</code>
                     to
                    <code>use_frames=True</code>
                    .
                </p>
                <p>
                    Also, if you want to be able to use the tab key to complete variable names (not
                    just keywords), you should implement an
                    <code>__iter__</code>
                     method for your frame class
                    that yields just the bound variable names (but not their values).
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_7"></a>
                    <a class="anchor" name="_functions"></a>
                <h2 class="cs_section_title">
                    7) Functions
                    <a class="cs_permalink" href="#_functions">§</a>
                </h2>
                </p>
                <p>
                    So far, we have a pretty nice calculator, but there are a few things missing
                    before we can really call it a programming language.  One of those things is
                    <em>user-defined functions</em>
                    .
                </p>
                <p>
                    Currently, the operations we can perform are limited to the functions in the
                    <code>scheme_builtins</code>
                     dictionary.  We can really empower a user of the language by
                    allowing them to define functions of their own.  As we've seen throughout
                    6.101, the ability to define our own functions is a really powerful means of
                    abstraction, and so this step will add a lot of power to our little language.
                </p>
                <p>Note: we recommend reading all of sections 7.1-7.4 before implementing custom
                function definitions and calls.</p>
                <p>
                    <a class="anchor" name="catsoop_section_7_1"></a>
                    <a class="anchor" name="_defining_functions"></a>
                <h3 class="cs_section_title">
                    7.1) Defining functions
                    <a class="cs_permalink" href="#_defining_functions">§</a>
                </h3>
                </p>
                <p>
                    In order to be able to make use of functions, we first need a way for a user to
                    <em>define</em>
                     a new function.  We will accomplish this via the
                    <code>lambda</code>
                     special
                    form.
                </p>
                <p>
                    A
                    <code>lambda</code>
                     expression takes the following form:
                    <code>(lambda (PARAM1 PARAM2
                    ...) EXPR)</code>
                    .  The result of evaluating such an expression should be an object
                    representing that function (note that this expression represents a function
                    <em>definition</em>
                    , not a function
                    <em>call</em>
                    ).  Importantly, there are a few things we
                    need to keep track of with regard to functions.  We need to store:
                </p>
                <ul>
                    <li>the code representing the body of the function (which, for now, is restricted
                    to a single expression representing the return value)</li>
                    <li>the names of the function's parameters</li>
                    <li>a pointer to the frame in which the function was defined (the function's enclosing frame)</li>
                </ul>
                <p>
                    <strong>You should define a class to represent your user-defined functions.</strong>
                      Once
                    again, it is up to you to determine exactly how to represent things inside
                    of these functions; but it is important that, however it is represented, it
                    stores the information above (and also that you are able to distinguish it from
                    the other types of objects we have seen so far)
                    <a class="anchor" name="catsoop_footnote_ref_6"></a>
                    <a href="#catsoop_footnote_6">
                        <sup>6</sup>
                    </a>
                    .
                </p>
                <div class="question">
                    <b>Check Yourself:</b>
                    <p>
                    <p>What information should be stored as instance attributes of this class?  What
                    kind of methods should the class support?
                    </p>
                    </p>
                    <p>
                        <span id="queue_checkyourself_3"></span>
                    </p>
                </div>
                <p>
                    For example, the result of evaluating
                    <code>(lambda (x y) (+ x y))</code>
                     in the global
                    frame should be an object that stores the following information:
                </p>
                <ul>
                    <li>
                        the function's parameters, in order, are called
                        <code>x</code>
                         and
                        <code>y</code>
                        .
                    </li>
                    <li>
                        the function's body is the expression
                        <code>(+ x y)</code>
                        .
                    </li>
                    <li>the function was defined in the global frame.</li>
                </ul>
                <p>
                    <a class="anchor" name="catsoop_section_7_2"></a>
                    <a class="anchor" name="_calling_functions"></a>
                <h3 class="cs_section_title">
                    7.2) Calling Functions
                    <a class="cs_permalink" href="#_calling_functions">§</a>
                </h3>
                </p>
                <p>
                    Defining functions is nice, but we also need a way to
                    <em>call</em>
                     these functions
                    after we've defined them.  When the first element in an S-expression evaluates
                    to a user-defined function, we will need to call the function by taking the
                    following steps:
                </p>
                <ul>
                    <li>evaluate all of the arguments to the function in the current frame
                    (from which the function is being called).</li>
                    <li>
                        make a new frame whose parent is the function's
                        enclosing frame (this is called
                        <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scope_vs._dynamic_scope">lexical scoping</a>
                        ).
                    </li>
                    <li>in that new frame, bind the function's parameters to the arguments that
                    are passed to it.</li>
                    <li>evaluate the body of the function in that new frame.</li>
                </ul>
                <p>
                    If we try to call something that is not a function, or if we try to call a
                    function with the incorrect number of arguments passed in, a
                    <code>SchemeEvaluationError</code>

                    should be raised.
                </p>
                <p>
                    It is worth noting that these steps are very close, if not exactly the same, as
                    the steps Python takes when it calls a function.  As such, you may find it helpful
                    to review the readings from
                    <a href="https://py.mit.edu/spring24/readings/environment_model">week 1</a>
                     and
                    <a href="https://py.mit.edu/spring24/readings/functions">week 2</a>
                    .
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_7_3"></a>
                    <a class="anchor" name="_examples_3"></a>
                <h3 class="cs_section_title" id="catsoop_label_function_examples" label="function_examples">
                    7.3) Examples
                    <a class="cs_permalink" href="#_examples_3">§</a>
                </h3>
                </p>
                <p>
                    Here are two examples of calling functions and using
                    <code>lambda</code>
                    .  The first
                    associates a name with the function and calls the function using that name,
                    whereas the second calls the function directly without first giving it a name.
                </p>
                <pre>
                    <code class="nohighlight">in&gt; (define square (lambda (x) (* x x)))
                        out&gt; function object

                    in&gt; (square 2)
                        out&gt; 4
                    </code>
                </pre>
                <pre>
                    <code class="nohighlight">in&gt; ((lambda (x) (* x x)) 3)
                        out&gt; 9
                    </code>
                </pre>
                <p>
                    <!--START question q000014 -->
                <section aria-label="Question">
                    <div class="question question-multiplechoice" id="cs_qdiv_q000014" style="position: static">
                        <div id="q000014_rendered_question">
                            <div id="catsoop_preamble_q000014"></div>
                            <div id="catsoop_prompt_q000014" style="display: inline;">
                                After evaluating the above code, what is the value of the variable
                                <code>x</code>
                                 in the global frame?
                                <br/>
                            </div>
                            <select aria-labelledby="catsoop_prompt_q000014" id="q000014" name="q000014">
                                <option selected="" value="-1">--</option>
                                <option value="0">2</option>
                                <option value="1">3</option>
                                <option value="2">4</option>
                                <option value="3">x is not bound in the global frame.</option>
                            </select>
                        </div>
                        <div>
                            <span id="q000014_buttons"></span>
                            <span id="q000014_loading_wrapper" role="status">
                                <span id="q000014_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000014_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000014_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000014_solution_container">
                            <div id="q000014_solution"></div>
                            <div id="q000014_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000014_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000014 -->
                </p>
                <p>
                    Here is another example of a more-complicated function.  Note that the result
                    of calling
                    <code>(foo 3)</code>
                     below is a
                    <em>function</em>
                    , which is then called with
                    <code>2</code>
                     as an
                    argument.  Note also that the value associated with the name
                    <code>x</code>
                     when we call
                    <code>(bar 2)</code>
                     is the
                    <code>3</code>
                     from the frame in which that function was
                    <em>created</em>
                    ,
                    not the
                    <code>7</code>
                     from the frame in which it was called.
                </p>
                <pre>
                    <code class="nohighlight">in&gt; (define x 7)
                        out&gt; 7

                    in&gt; (define foo (lambda (x) (lambda (y) (+ x y))))
                        out&gt; function object

                    in&gt; (define bar (foo 3))
                        out&gt; function object

                    in&gt; (bar 2)
                    </code>
                </pre>
                <p>
                    <!--START question bar2 -->
                <section aria-label="Question">
                    <div class="question question-pythonic" id="cs_qdiv_bar2" style="position: static">
                        <div id="bar2_rendered_question">
                            <div id="catsoop_preamble_bar2"></div>
                            <div id="catsoop_prompt_bar2" style="display: inline;">
                                What is the result when evaluating
                                <code>(bar 2)</code>
                                 above?
                                <br/>
                            </div>
                            <input aria-labelledby="catsoop_prompt_bar2" id="bar2" name="bar2" size="50" type="text" value=""/>
                        </div>
                        <div>
                            <span id="bar2_buttons"></span>
                            <span id="bar2_loading_wrapper" role="status">
                                <span id="bar2_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="bar2_score_display" role="status"></span>
                            <div class="nsubmits_left" id="bar2_nsubmits_left" role="status"></div>
                        </div>
                        <div id="bar2_solution_container">
                            <div id="bar2_solution"></div>
                            <div id="bar2_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="bar2_message" role="status"></div>
                    </div>
                </section>
                <!--END question bar2 -->
                </p>
                <p>
                    <!--START question q000015 -->
                <section aria-label="Question">
                    <div class="question question-multiplechoice" id="cs_qdiv_q000015" style="position: static">
                        <div id="q000015_rendered_question">
                            <div id="catsoop_preamble_q000015"></div>
                            <div id="catsoop_prompt_q000015" style="display: inline;">
                                After evaluating the above code, what is the value of the variable
                                <code>x</code>
                                 in the global frame?
                                <br/>
                            </div>
                            <select aria-labelledby="catsoop_prompt_q000015" id="q000015" name="q000015">
                                <option selected="" value="-1">--</option>
                                <option value="0">2</option>
                                <option value="1">3</option>
                                <option value="2">5</option>
                                <option value="3">7</option>
                                <option value="4">9</option>
                                <option value="5">x is not bound in the global frame.</option>
                            </select>
                        </div>
                        <div>
                            <span id="q000015_buttons"></span>
                            <span id="q000015_loading_wrapper" role="status">
                                <span id="q000015_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000015_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000015_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000015_solution_container">
                            <div id="q000015_solution"></div>
                            <div id="q000015_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000015_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000015 -->
                </p>
                <p>
                    <!--START question q000016 -->
                <section aria-label="Question">
                    <div class="question question-multiplechoice" id="cs_qdiv_q000016" style="position: static">
                        <div id="q000016_rendered_question">
                            <div id="catsoop_preamble_q000016"></div>
                            <div id="catsoop_prompt_q000016" style="display: inline;">
                                After evaluating the above code, what is the value of the variable
                                <code>y</code>
                                 in the global frame?
                                <br/>
                            </div>
                            <select aria-labelledby="catsoop_prompt_q000016" id="q000016" name="q000016">
                                <option selected="" value="-1">--</option>
                                <option value="0">2</option>
                                <option value="1">3</option>
                                <option value="2">5</option>
                                <option value="3">7</option>
                                <option value="4">9</option>
                                <option value="5">y is not bound in the global frame.</option>
                            </select>
                        </div>
                        <div>
                            <span id="q000016_buttons"></span>
                            <span id="q000016_loading_wrapper" role="status">
                                <span id="q000016_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="q000016_score_display" role="status"></span>
                            <div class="nsubmits_left" id="q000016_nsubmits_left" role="status"></div>
                        </div>
                        <div id="q000016_solution_container">
                            <div id="q000016_solution"></div>
                            <div id="q000016_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="q000016_message" role="status"></div>
                    </div>
                </section>
                <!--END question q000016 -->
                </p>
                <div class="question">
                    <b>Check Yourself:</b>
                    <p>
                    <p>
                        Why does
                        <code>(bar 2)</code>
                         not evaluate to
                        <code>9</code>
                        ?
                    </p>
                    <div class="response">
                        <button aria-pressed="false" class="btn btn-catsoop showhide-toggle" onclick='this.setAttribute("aria-pressed", this.getAttribute("aria-pressed") === "true" ? "false" : "true");' role="button">Show/Hide</button>
                        <div>
                            <p>
                                Even though it was called from the global frame, the function we are
                                referring to as
                                <code>bar</code>
                                 was defined inside of a frame, call it
                                <b>F</b>
                                ,
                                where
                                <code>x</code>
                                 was bound to the value
                                <code>3</code>
                                 (the frame that was created when we
                                evaluated
                                <code>(foo 3)</code>
                                ).  When we call
                                <code>(bar 2)</code>
                                , the associated frame's
                                parent will be
                                <b>F</b>
                                , so looking up
                                <code>x</code>
                                 finds the value
                                <code>3</code>
                                 in
                                <b>F</b>
                                , rather
                                than the value
                                <code>7</code>
                                 in the global frame.
                            </p>
                            <p>It may also help to look at equivalent Python code:</p>
                            <pre>
                                <code class="language-py">x = 7
                                def foo(x):
                                    return lambda y: x+y
                                bar = foo(3)
                                print(bar(2))  # this prints 5!
                                </code>
                            </pre>
                        </div>
                    </div>
                    </p>
                    <p>
                        <span id="queue_checkyourself_4"></span>
                    </p>
                </div>
                <p>
                    <a class="anchor" name="catsoop_section_7_4"></a>
                    <a class="anchor" name="_changes_to_evaluate_2"></a>
                <h3 class="cs_section_title">
                    7.4) Changes to
                    <code>evaluate</code>
                    <a class="cs_permalink" href="#_changes_to_evaluate_2">§</a>
                </h3>
                </p>
                <p>
                    We will also need to make sure that
                    <code>evaluate</code>
                     handles the
                    <code>lambda</code>
                     keyword
                    properly, by creating a new function object that stores the names of the
                    parameters, the expression representing the body of the function, and the
                    frame in which the function was defined.  We also need to modify
                    <code>evaluate</code>

                    to handle
                    <em>calling</em>
                     user-defined functions.
                </p>
                <p>
                    From a high-level perspective, your evaluator should now work in the following
                    way, given an expression
                    <code>e</code>
                    :
                </p>
                <ul>
                    <li>
                        If
                        <code>e</code>
                         represents a number, it should evaluate to that number.
                    </li>
                    <li>
                        If
                        <code>e</code>
                         represents a variable name, it should evaluate to the value associated
                        with that variable in the given frame, or it should raise an
                        <code>SchemeNameError</code>
                         if a binding cannot be found according to the rules above.
                    </li>
                    <li>
                        If
                        <code>e</code>
                         represents a special form (such as
                        <code>define</code>
                        ), it should be evaluated
                        according to the rules for that special form.
                    </li>
                    <li>
                        Otherwise,
                        <code>e</code>
                         is a compound expression representing a function call.  Each
                        of the subexpressions should be evaluated in the given frame, and:
                        <ul>
                            <li>If the first subexpression is a built-in function, it should be called
                            with the remaining subexpressions as arguments (in order).</li>
                            <li>If the first subexpression is a user-defined function, it should be
                            called according to the rules given above.</li>
                        </ul>
                    </li>
                </ul>
                <p>
                    If we try to call something that is not a function, or if we try to call a
                    function with the incorrect number of arguments passed in, a
                    <code>SchemeEvaluationError</code>

                    should be raised.
                </p>
                <div class="callout callout-note">
                    <div class="callout-title">Note</div>
                    <p>Note that in the case of an S-expression that
                    isn't a special form, evaluating the first element in the S-expression gives us
                    the function that is to be called, regardless of how it is specified (so your
                    evaluator code should not have additional logic based on the syntactic form of
                    that first element).</p>
                </div>
                <p>
                    After you have made the changes above, try them out in the REPL using the
                    examples from
                    <a href="#_examples_3">subsection 7.3</a>
                    .  Once you are reasonably
                    certain that everything is working, try them with
                    <code>test.py</code>
                    .
                </p>
                <div class="question">
                    <b>Check Yourself:</b>
                    <p>
                    <p>
                        How difficult was it to add the
                        <code>lambda</code>
                         special form?  And how much did it
                        complicate your code?  From here through Lisp Part 2 next week, we will be adding several new special forms
                        to the language, so it is worth thinking ahead to see if there are ways of
                        reorganizing your code to make adding new special forms easier.
                    </p>
                    </p>
                    <p>
                        <span id="queue_checkyourself_5"></span>
                    </p>
                </div>
                <p>
                    <a class="anchor" name="catsoop_section_7_5"></a>
                    <a class="anchor" name="_easier_function_definitions"></a>
                <h3 class="cs_section_title">
                    7.5) Easier Function Definitions
                    <a class="cs_permalink" href="#_easier_function_definitions">§</a>
                </h3>
                </p>
                <p>
                    Implementing user-defined functions has given a lot of power to our
                    interpreter!  But it is kind of a pain to type them out.  Implement a shorter
                    syntax for function definitions, so that, if the
                    <code>NAME</code>
                     in a
                    <code>define</code>

                    expression is itself an S-expression, it is implicitly translated to a function
                    definition before binding.  For example:
                </p>
                <ul>
                    <li>
                        <code>(define (five) (+ 2 3))</code>
                         should be equivalent to
                        <code>(define five (lambda () (+ 2 3)))</code>
                    </li>
                    <li>
                        <code>(define (square x) (* x x))</code>
                         should be equivalent to
                        <code>(define square (lambda (x) (* x x)))</code>
                    </li>
                    <li>
                        <code>(define (add2 x y) (+ x y))</code>
                         should be equivalent to
                        <code>(define add2 (lambda (x y) (+ x y)))</code>
                    </li>
                </ul>
                <p>This is nice not only because it is easier to type but also because it makes
                the definition of a function more closely mirror the syntax we will use when
                calling the function.</p>
                <p>
                    Modify your
                    <code>evaluate</code>
                     function so that it handles this new form.  After
                    implementing this change, try it out in the REPL and then in
                    <code>test.py</code>
                    .  At
                    this point, your code should pass all the tests in
                    <code>test.py</code>
                    .
                </p>
                <p>
                    <a class="anchor" name="catsoop_section_8"></a>
                    <a class="anchor" name="_schemeerrors"></a>
                <h2 class="cs_section_title">
                    8) SchemeErrors
                    <a class="cs_permalink" href="#_schemeerrors">§</a>
                </h2>
                </p>
                <p>
                    Note that throughout the lab we encourage you to raise various
                    <code>SchemeErrors</code>
                    . We
                    are testing that:
                </p>
                <ul>
                    <li>
                        <p>
                            a
                            <code>SchemeSyntaxError</code>
                             is raised inside of parse to indicate that the provided
                            tokens do not make a well-formed expression. Note that a well-formed expression
                            consists of either a single symbol / number token or a single expression which
                            begins with open parenthesis
                            <code>'('</code>
                             and finishes at the end of the tokens with a
                            matching close
                            <code>')'</code>
                             parenthesis. If there are multiple expressions in the
                            input tokens, even if  they are well-formed, your code should raise a
                            <code>SchemeSyntaxError</code>
                            . For example,
                            <code>parse(['(', 'expression1', ')', '(', 'expression2', ')'])</code>

                            should raise a
                            <code>SchemeSyntaxError</code>
                             because the result of parsing the expression
                            starting at index
                            <code>0</code>
                            , results in
                            <code>['expression1']</code>
                            , which ends at an index before
                            the end of the tokens.
                        </p>
                    </li>
                    <li>
                        <p>
                            a
                            <code>SchemeNameError</code>
                             is raised when in the course of evaluating an expression
                            the program cannot find a binding for a given symbol (represented by a string).
                            A
                            <code>SchemeNameError</code>
                             that arises in the course of a larger expression should
                            over-ride a
                            <code>SchemeEvaluationError</code>
                            . For example
                            <code>evaluate(['undefined_symbol', 3, 4])</code>

                            should raise a
                            <code>SchemeNameError</code>
                            , not a
                            <code>SchemeEvaluationError</code>
                             because the
                            interpreter should realize the binding for
                            <code>'undefined_symbol'</code>
                             does not exist before we attempt to
                            call it as a function. Similarly,
                            <code>evaluate(['+', 'undefined_symbol', 4])</code>
                             should
                            also raise a
                            <code>SchemeNameError</code>
                             because the program should realize the symbol is undefined
                            before calling the add function.
                        </p>
                    </li>
                    <li>
                        <p>
                            a
                            <code>SchemeEvaluationError</code>
                             is raised in
                            <code>evaluate</code>
                             when in the course of evaluating
                            a nested expression (a list) we are unable to call a function due to the first part of the
                            expression being missing or not being a
                            <a href="https://docs.python.org/3/library/functions.html#callable">callable</a>

                            function (e.g.,
                            <code>parse([])</code>
                             or
                            <code>parse([5, 4])</code>
                            ) or not providing the correct number of arguments for the given
                            function (e.g.,
                            <code>evaluate(parse(tokenize('((lambda (x y) (* x y)) 1 2 3)')))</code>
                             provides
                            three arguments for the lambda function instead of the required two arguments.)
                        </p>
                    </li>
                </ul>
                <p>
                    <a class="anchor" name="catsoop_section_9"></a>
                    <a class="anchor" name="_endnotes"></a>
                <h2 class="cs_section_title">
                    9) Endnotes
                    <a class="cs_permalink" href="#_endnotes">§</a>
                </h2>
                </p>
                <p>At this point, we have a very nice start toward an interpreter for Scheme.
                We have the ability to create variables and to define and call functions.
                Note also that recursion and closures come about naturally as a result of the
                rules we have implemented for calling functions (we don't have to do any
                additional work to get those features!).  And hopefully implementing it has
                been an illuminating experience implementing the various pieces of the
                environment model we've been discussing throughout the semester!</p>
                <p>
                    However, we still have some work to do before our language is complete.  In
                    particular, next week, we will add support for conditionals and lists, along
                    with a few other niceties.
                    <a class="anchor" name="catsoop_section_10"></a>
                    <a class="anchor" name="_code_submission"></a>
                <h2 class="cs_section_title">
                    10) Code Submission
                    <a class="cs_permalink" href="#_code_submission">§</a>
                </h2>
                </p>
                <p>
                    When you have tested your code sufficiently on your own machine, submit your
                    modified
                    <code>lab.py</code>
                     using the
                    <code>6.101-submit</code>
                     script.  If you haven't already
                    installed it, see the instructions on
                    <a href="https://py.mit.edu/_static/spring24/info/infrastructure">this page</a>
                    .
                </p>
                <p>
                    The following command should submit the lab, assuming that the last argument
                    <code>/path/to/lab.py</code>
                     is replaced by the location of your
                    <code>lab.py</code>
                     file:
                </p>
                <pre>
                    <code class="language-nohighlight">$ 6.101-submit -a lisp_1 /path/to/lab.py
                    </code>
                </pre>
                <p>Running that script should submit your file to be checked.  After submitting your file, information about the checking process can be found below:</p>
                <p>
                    <!--START question code_submit -->
                <section aria-label="Question">
                    <div class="question question-lab101" id="cs_qdiv_code_submit" style="position: static">
                        <div id="code_submit_rendered_question">
                            <div id="catsoop_preamble_code_submit"></div>
                            <div id="catsoop_prompt_code_submit" style="display: inline;"></div>
                            When this page was loaded, you had not yet made any submissions.
                            <br/>
                            If you make a submission, results should show up here automatically; or you may click
                            <a href="javascript:reload_code_submit();">here</a>
                             or reload the page to see updated results.
                            <br/>
                        </div>
                        <div>
                            <span id="code_submit_buttons"></span>
                            <span id="code_submit_loading_wrapper" role="status">
                                <span id="code_submit_loading" style="display:none;">
                                    <img class="catsoop-darkmode-invert" src="data:image/gif;base64,R0lGODlhEAAQAPIGAMLCwkJCQgAAAGJiYoKCgpKSkv///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAGACwAAAAAEAAQAAADMmi63P4wyklrAyEAGoQInAdOmGYBw7AxwLoMGcG2rkHEQFHQLTsQOd2mB9ERCpTWzpEAACH5BAkKAAYALAAAAgAKAA4AAAMraAYRoNAEIUJUs97VHgTD4EVDQ2xEM2wgMV5AUbyKLKNEvoxA3P8sYNCQAAAh+QQJCgAGACwAAAAACgAOAAADLWi6EAFrBSGCAmQ0as1wROFABuEM0TUQ5FUU7fK+aRkWNYDFqV4bOl8v+BMuEgAh+QQJCgAGACwAAAAADgAKAAADKmi6QAMrrhECkaaVVl+FRiFuAwEEghAoYxGhqgI0oPxlNSbPOcb3PqAkAQAh+QQJCgAGACwCAAAADgAKAAADKWhqUAUrLuekApA+MiDD4BYExAVGwzgsmNR0lgWMXmwEghDYCq7zDFoCACH5BAkKAAYALAYAAAAKAA4AAAMqaADWros9GEuRUBE7jeUTYGEhMZANEQREN6xDJ54PsKJGIAhBp/OyWyMBACH5BAkKAAYALAYAAgAKAA4AAAMpaKoA+609Fie1C5Tipt7WRhRWw0ED0T1DEAyMq7mEEghCAKTdnZcySwIAIfkEBQoABgAsAgAGAA4ACgAAAytoumwALb4X2YR1URACVkBRYIEgBIw4KuUJDERIzGD3doMhfguBZyAYT5EAADs="/>
                                    <span class="screenreader-only-clip">Loading...</span>
                                </span>
                            </span>
                            <span id="code_submit_score_display" role="status"></span>
                            <div class="nsubmits_left" id="code_submit_nsubmits_left" role="status"></div>
                        </div>
                        <div id="code_submit_solution_container">
                            <div id="code_submit_solution"></div>
                            <div id="code_submit_solution_explanation"></div>
                        </div>
                        <div aria-atomic="true" id="code_submit_message" role="status"></div>
                    </div>
                </section>
                <!--END question code_submit -->
                </p>
                <p>
                    <script src="https://py.mit.edu/submission_nudger/socket.io/socket.io.js" type="text/javascript"></script>
                    <script type="text/javascript">
                    catsoop.nudger_id = '18429db391c4f599f23c85301de8312bfe7e8043c756bc44cd67f37b0351a8dd';

                    var socket = io('https://py.mit.edu', {
                        path: '/submission_nudger' + '/socket.io',
                        autoConnect: false
                    });

                    socket.on('connect', function() {
                        socket.emit('hello', {
                            id: catsoop.nudger_id
                        });
                    });

                    socket.on('refresh', reload_code_submit);

                    socket.open();
                    </script>
                </p>
                <script type="text/javascript">
                // @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3
                catsoop.all_questions = ['q000000', 'tokenize2', 'q000001', 'parse2', 'parse3', 'parse4', 'q000002', 'q000003', 'q000004', 'q000005', 'q000006', 'q000007', 'q000008', 'q000009', 'q000010', 'q000011', 'q000012', 'q000013', 'q000014', 'bar2', 'q000015', 'q000016', 'code_submit'];
                catsoop.username = null;
                catsoop.this_path = 'https://py.mit.edu/spring24/labs/lisp_1';
                catsoop.path_info = ['spring24', 'labs', 'lisp_1'];
                catsoop.course = 'spring24';
                catsoop.url_root = 'https://py.mit.edu';
                catsoop.imp = '';
                catsoop.skip_alert = [];
                catsoop.viewans_confirm = "Are you sure?  Viewing the answer will prevent any further submissions to this question.  Press 'OK' to view the answer, or press 'Cancel' if you have changed your mind.";

                // @license-end
                </script>
                <div id="cs_footnotes">
                    <br/>
                    <hr/>
                    <b name="cs_footnotes">Footnotes</b>
                    <p>
                        <a class="anchor" name="catsoop_footnote_1"></a>
                        <sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">1</sup>
                        The book associated with this subject,
                        <a href="https://en.wikipedia.org/wiki/Structure_and_Interpretation_of_Computer_Programs" target="_blank">Structure and Interpretation of Computer Programs</a>
                        , is
                        considered by many to be one of the best books ever written on the topic of
                        programming.
                        <a href="#catsoop_footnote_ref_1">
                            <span class="noprint">(click to return to text)</span>
                        </a>
                    </p>
                    <p>
                        <a class="anchor" name="catsoop_footnote_2"></a>
                        <sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">2</sup>
                        Note that we pass these arguments to the function as a single list containing all arguments, rather than as separate arguments
                        <a href="#catsoop_footnote_ref_2">
                            <span class="noprint">(click to return to text)</span>
                        </a>
                    </p>
                    <p>
                        <a class="anchor" name="catsoop_footnote_3"></a>
                        <sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">3</sup>
                        Note that when you raise an exception, you can include
                        an error message with details about the specifics of that error with the
                        following syntax:
                        <code>raise SchemeNameError("some error message here")</code>
                        .  This can
                        help greatly with debugging, as it can help you locate the particular
                        <code>raise</code>
                         statement an error came from (and, ultimately, the cause of the
                        exception). Note also that it is good style to avoid large try / except
                        blocks.
                        <a href="#catsoop_footnote_ref_3">
                            <span class="noprint">(click to return to text)</span>
                        </a>
                    </p>
                    <p>
                        <a class="anchor" name="catsoop_footnote_4"></a>
                        <sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">4</sup>

                        Although we will not be explicitly testing for them, there are a few "edge cases" to consider when implementing these functions.  For multiplication, if we take the product of some numbers
                        <span class="cs_math_to_render">a_0\times a_1\times a_2\times \ldots</span>
                         and multiply it by the product of some numbers
                        <span class="cs_math_to_render">b_0\times b_1\times b_2\times \ldots</span>
                        , we should get the same result as if we multiplied
                        <span class="cs_math_to_render">a_0\times a_1\times a_2\times \ldots \times b_0\times b_1\times b_2\times \ldots</span>
                        .  This suggests: 1)Multiplication with 1 argument passed in should return that argument itself.
                        2)Multiplication with no arguments should return 1.
                        (In that same vein, note that
                        <code>(+)</code>
                         evaluates to
                        <code>0</code>
                        , and
                        <code>(+ 2)</code>
                         evaluates to
                        <code>2</code>
                        .) For division, it's not clear that such a relationship exists.  But one set of rules that could make sense (and which is implemented in the MIT/GNU Scheme dialect of LISP) is: 1) Division with no arguments should raise an exception. 2) Division with a single argument
                        <span class="cs_math_to_render">x</span>
                         should return
                        <span class="cs_math_to_render">1/x</span>
                        .

                        <a href="#catsoop_footnote_ref_4">
                            <span class="noprint">(click to return to text)</span>
                        </a>
                    </p>
                    <p>
                        <a class="anchor" name="catsoop_footnote_5"></a>
                        <sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">5</sup>
                        Note that this is equivalent to Python's "
                        <a href="https://www.python.org/dev/peps/pep-0572/">walrus operator</a>
                        ," which was new in Python 3.8.
                        <a href="#catsoop_footnote_ref_5">
                            <span class="noprint">(click to return to text)</span>
                        </a>
                    </p>
                    <p>
                        <a class="anchor" name="catsoop_footnote_6"></a>
                        <sup style="padding-right:0.25em;color:var(--cs-base-bg-color);">6</sup>
                        If you want to, you
                        can implement the
                        <code>__call__</code>
                         "dunder" method to make instances of your class be
                        callable like regular Python functions.
                        <a href="#catsoop_footnote_ref_6">
                            <span class="noprint">(click to return to text)</span>
                        </a>
                    </p>
                </div>
            </div>
        </div>
        <div class="cs_right_menu"></div>
    </div>
    <footer>
        <nav aria-label="Breadcrumbs" class="cs_navigation cs_bottom_navigation" id="cs_bottom_navigation">
            <li>
                <a href="https://py.mit.edu/spring24">Home</a>
            </li>
            <li>
                <a href="https://py.mit.edu/spring24/labs/lisp_1">LISP Interpreter, Part 1</a>
            </li>
        </nav>
        <div class="cs_footer">

                  This page was last updated on Saturday April 27, 2024 at 01:41:38 PM (revision
            <code>a38b70c</code>
            ).
            <br/>
            <br/>
            <pre class="catsooplogo" style="font-size:50%;">\
            /    /\__/\
            \__=(  o_O )=
            (__________)
             |_ |_ |_ |_ </pre>

                  Powered by
            <a href="https://catsoop.org" target="_blank">CAT-SOOP</a>
             v19.0.6+hg.2.cebb45dc "Korat" (LTS) (development snapshot).
            <br/>

                  CAT-SOOP is
            <a href="https://www.fsf.org/about/what-is-free-software" target="_blank">Free/Libre Software</a>
            , available under the terms
            <br/>
            of the
            <a href="https://py.mit.edu/_util/license" target="_blank">GNU Affero General Public License, version 3</a>
            .
            <br/>
            <a download="" href="https://py.mit.edu/_util/source.zip" target="_blank">Download Source Code</a>
            <br/>
            <a href="https://py.mit.edu/_util/jslicense.html" rel="jslicense" target="_blank">Javascript License Information</a>
        </div>
    </footer>
</body>
</html>

